(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3126:function(e,t,r){Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.t.bind(r,9646,23)),Promise.resolve().then(r.bind(r,5434)),Promise.resolve().then(r.bind(r,5314))},5434:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var o=r(3827),n=r(9799),i=r(4090),a=r(5971);function s(){let[e,t]=(0,i.useState)(!0),[r,s]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(null),[m,h]=(0,i.useState)(!1),f=(0,n.y)(e=>e.setUser),b=async t=>{t.preventDefault(),u(null),h(!0);try{let t=e?await (0,a.zB)(r,l):await (0,a.y1)(r,l);f(t)}catch(e){console.error("Auth error:",e),u(e.message||"Authentication failed")}finally{h(!1)}};return(0,o.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:e?"Login":"Sign Up"}),d&&(0,o.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:d}),(0,o.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>s(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,o.jsx)("input",{type:"password",id:"password",value:l,onChange:e=>c(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:m?"Loading...":e?"Login":"Sign Up"})]}),(0,o.jsx)("div",{className:"mt-4 text-center",children:(0,o.jsx)("button",{onClick:()=>t(!e),className:"text-sm text-blue-600 hover:text-blue-500",children:e?"Need an account? Sign up":"Already have an account? Login"})})]})}function l(e){let{children:t}=e,{user:r,setUser:i}=(0,n.y)(),l=async()=>{try{await (0,a.ni)(),i(null)}catch(e){console.error("Logout error:",e)}};return r?(0,o.jsxs)("div",{children:[(0,o.jsx)("header",{className:"bg-white shadow",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pokemon Card Tracker"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:r.email}),(0,o.jsx)("button",{onClick:l,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Logout"})]})]})}),(0,o.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})]}):(0,o.jsx)(s,{})}},5314:function(e,t,r){"use strict";r.r(t),r.d(t,{FirebaseInit:function(){return i}});var o=r(4090),n=r(5971);function i(){return console.log("[Firebase] FirebaseInit component rendered"),(0,o.useEffect)(()=>{console.log("[Firebase] FirebaseInit useEffect triggered");let e=document.createElement("div");e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.padding="10px",e.style.background="rgba(0,0,0,0.8)",e.style.color="white",e.style.borderRadius="5px",e.style.fontSize="12px",e.style.fontFamily="monospace",e.style.zIndex="9999",e.innerHTML="Firebase: Initializing...<br>Time: ".concat(new Date().toISOString(),"<br>ENV: ","production"),document.body.appendChild(e);try{let{db:t}=(0,n.mw)();console.log("[Firebase] Initialization successful:",{hasDb:!!t,env:"production",window:{location:window.location.href,hostname:window.location.hostname}}),e.style.background="rgba(0,0,0,0.8)",e.innerHTML="\n        Firebase: Connected<br>\n        Time: ".concat(new Date().toISOString(),"<br>\n        ENV: ","production","<br>\n        Path: ").concat(window.location.pathname,"\n      ")}catch(t){console.error("[Firebase] Connection error:",t),e.style.background="rgba(255,0,0,0.8)",e.innerHTML="\n        Firebase: Error<br>\n        Time: ".concat(new Date().toISOString(),"<br>\n        ENV: ","production","<br>\n        Error: ").concat(t instanceof Error?t.message:"Unknown error","<br>\n        Stack: ").concat(t instanceof Error?t.stack:"No stack trace","\n      ")}return()=>{let e=document.querySelector("div[data-firebase-debug]");e&&e.remove()}},[]),null}console.log("[Firebase] FirebaseInit component loaded")},5971:function(e,t,r){"use strict";let o;r.d(t,{JJ:function(){return d},kV:function(){return u},mw:function(){return c},ni:function(){return f},y1:function(){return m},yv:function(){return b},zB:function(){return h}});var n=r(6142),i=r(8121),a=r(2730);let s=null,l=null;function c(){if(s)return{db:s,auth:l};let e={apiKey:"AIzaSyAFDt7q24P_T3TgYkpkxCrVrVblwVE3CEI",authDomain:"pokemon-card-tracker-87d04.firebaseapp.com",projectId:"pokemon-card-tracker-87d04",storageBucket:"pokemon-card-tracker-87d04.firebasestorage.app",messagingSenderId:"824609169487",appId:"1:824609169487:web:2e3301ef05186d85d80a3a"};try{if(console.log("[Firebase] Initializing with config:",{hasApiKey:!!e.apiKey,hasProjectId:!!e.projectId,env:"production",envVars:{apiKey:"set",projectId:"set"}}),!e.apiKey||!e.projectId)throw Error("Firebase configuration is incomplete");return o=(0,n.ZF)(e),console.log("[Firebase] App initialized"),s=(0,i.ad)(o),l=(0,a.v0)(o),console.log("[Firebase] Firestore and Auth initialized"),{db:s,auth:l}}catch(e){throw console.error("[Firebase] Initialization error:",e),e}}async function d(e){if(!s)throw Error("Firestore not initialized");try{let t=(0,i.JU)(s,"collections",e),r=await (0,i.QT)(t);if(r.exists())return r.data();return null}catch(e){throw console.error("[Firebase] Error getting collection:",e),e}}async function u(e,t){if(!s)throw Error("Firestore not initialized");try{let r=(0,i.JU)(s,"collections",e);await (0,i.pl)(r,t)}catch(e){throw console.error("[Firebase] Error saving collection:",e),e}}async function m(e,t){if(!l)throw Error("Auth not initialized");try{return(await (0,a.Xb)(l,e,t)).user}catch(e){throw console.error("[Firebase] Error signing up:",e),e}}async function h(e,t){if(!l)throw Error("Auth not initialized");try{return(await (0,a.e5)(l,e,t)).user}catch(e){throw console.error("[Firebase] Error signing in:",e),e}}async function f(){if(!l)throw Error("Auth not initialized");try{await (0,a.w7)(l)}catch(e){throw console.error("[Firebase] Error signing out:",e),e}}function b(e){if(!l)throw Error("Auth not initialized");return(0,a.Aj)(l,e)}},9799:function(e,t,r){"use strict";r.d(t,{y:function(){return a}});var o=r(2020),n=r(5249),i=r(5971);let a=(0,o.Ue)()((0,n.tJ)((e,t)=>({user:null,collection:{},hydrated:!1,error:null,setHydrated:()=>e({hydrated:!0}),setUser:async r=>{if(e({user:r}),r)try{let o=await (0,i.JJ)(r.uid);o?(console.log("Found existing collection for user:",r.uid),e({collection:o.collection})):(console.log("No existing collection found for user:",r.uid),e({collection:{}})),await t().syncWithFirebase()}catch(t){console.error("Error loading collection:",t),e({error:"Failed to load collection"})}else e({collection:{}})},addCard:async r=>{e(e=>({collection:{...e.collection,[r]:!0}})),await t().syncWithFirebase()},removeCard:async r=>{e(e=>{let t={...e.collection};return delete t[r],{collection:t}}),await t().syncWithFirebase()},hasCard:e=>t().collection[e]||!1,setError:t=>e({error:t}),syncWithFirebase:async()=>{let{user:r,collection:o}=t();if(!r){console.log("No user logged in, skipping sync");return}try{console.log("Starting Firebase sync for user:",r.uid),console.log("Collection to sync:",o),await (0,i.kV)(r.uid,{collection:o,lastUpdated:Date.now()});let t=await (0,i.JJ)(r.uid);if(console.log("Verified saved data:",t),!t)throw Error("Failed to verify saved data");e({error:null}),console.log("Firebase sync completed successfully")}catch(t){throw console.error("Error syncing with Firebase:",t),e({error:"Failed to save your collection. Please try again."}),t}}}),{name:"pokemon-collection",partialize:e=>({collection:e.collection}),onRehydrateStorage:()=>async e=>{if(e){try{console.log("Rehydrating storage with state:",e);let t=(0,i.yv)(t=>{console.log("Auth state changed:",null==t?void 0:t.uid),e.setUser(t)});return()=>t()}catch(t){console.error("Error initializing store:",t),e.setError("Failed to initialize. Please refresh the page.")}e.setHydrated()}}}))},3385:function(){},9646:function(e){e.exports={style:{fontFamily:"'__Inter_c20822', '__Inter_Fallback_c20822'",fontStyle:"normal"},className:"__className_c20822"}}},function(e){e.O(0,[358,638,589,971,69,744],function(){return e(e.s=3126)}),_N_E=e.O()}]);